# This configuration file was automatically generated by Gitpod.
# Please adjust to your needs (see https://www.gitpod.io/docs/config-gitpod-file)
# and commit this file to your remote git repository to share the goodness with others.

tasks:
  - init: cd emsdk && ./emsdk install latest &&./emsdk activate latest
    command: |
      gp sync-await submodule
      echo 'source "/workspace/apollo/emsdk/emsdk_env.sh"' >> $HOME/.bash_profile
      gp sync-done emsdk
      exit
    name: Install and setup Emscripten
    openMode: split-right
  - init: |
      rustup install nightly
      rustup default nightly
      rustup component add rustfmt
      cargo fetch
      cargo check
    before: |
      gp sync-await emsdk
      source "/workspace/apollo/emsdk/emsdk_env.sh"
      gp sync-await submodule
      cargo build
      exit
    name: Install and setup Rust
    openMode: split-right
  - init: |
      git submodule update --init
      git submodule foreach git reset --hard
      gp sync-done submodule
      exit
    name: Update submodules
    openMode: split-right
